# 位运算

js中，可以使用`0b`来表示二进制，但是进行位运算的时候，一般都是使用`0x`十六进制来进行的。

## 位运算实例

在解析mp3中的ID3信息的时候，前面的第7-10位表示的是ID3v2版本tag/frame信息长度。js代码为

```javascript
var size1 = arr[6]
var size2 = arr[7];
var size3 = arr[8];
var size4 = arr[9];

var size = size4 & 0x7f | (size3 & 0x7f) << 7 | (size2 & 0x7f) << 14 | (size1 & 0x7f) << 21;
```

这段代码的意思是，size是被转换成二进制，用四个字节来存储，每个字节占用7位。假设frame信息长度为31221b,转换成二级制则为`(31221).toString(2) => 111100111110101`，将`111100111110101`分为4个字节来存储，则从后往前存储应该为`[0,0b1,0b1110011,0b1110101] => [0, 1, 115, 117]`将这个反过来则是

`size4 & 0x7f | (size3 & 0x7f) << 7 | (size2 & 0x7f) << 14 | (size1 & 0x7f) << 21` => `117 & 0x7f |(115 & 0x7f) << 7 | (1 & 0x7f) << 14 | (0 & 0x7f) << 21` => 31221

所以可以看出这段代码部署乱写的，但是为什么这么写了？这里有个关键点就是使用位移（<<）然后再或（|）其实可以看做是二级制的相加。可以理解为数组有个4个元素都为1，每个1的单位分别是个、十、百、千，那么这个数组表示的数字就是1111。

## &在实际中的运用

转换范围：“Buffer 类的实例类似于从 0 到 255 之间的整数数组（其他整数会通过 ＆ 255 操作强制转换到此范围）”

256 & 255 = 0
257 & 255 = 1
22 & 255 = 22
1000 & 255 = 232
