# 数、位、浮点数

```javascript
var buffer = new ArrayBuffer(8);
var view = new Float32Array(buffer);
console.log(Math.pow(2, 33))
// 如果是Uint32Array,最大值为Math.pow(2, 32) - 1
// 如果是Int32Array,最大值为Math.pow(2, 31) - 1
// 如果是Float32Array,表示范围更大，但是不能精确，
// 比如Math.pow(2, 32)和Math.pow(2,32)-1,
// 如果使用浮点来存储，则值是一样的。
// float32; 1位符号位，8位指数位，23位小数位
// IEEE754规定float的有效值为“小数部分 + 1”
// 小数部分全为0，表示的实际有效数字为1.0
// 小数部分全为1，表示的实际有效数字约为2
// 0.11111111111111111111 对应 1.11111111111111111111
// 二进制1.11111111111111111111 约等于10进制的 2

view[0] = Math.pow(2,33);
view[1] = 2222222;
view[2] = 3333333;
view[3] = 2222222;
console.log(view[3])
```

所以，在js中常常遇到`0.1+0.2=0.3000000000004`的问题。是因为要计算0.1+0.2,计算机会先把小数转换成2进制，然后相加。但是有一些浮点数在转换成2进制的时候会出现无限循环。比如十进制的0.1转换为2进制会是如下结果：

```javascript
0.1 => 0.0001 1001 1001 1001…（无限循环）

0.2 => 0.0011 0011 0011 0011…（无限循环）
```

然后对位相加重新转成10进制的时候就会出现多的位。
